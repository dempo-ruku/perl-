<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>インプレス いちばんやさしいJavaScriptの教本</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.5.0.min.js"></script>
</head>
<body>
  <button id="button">お問い合わせ</button>
  <form action="" id="form">
    <p><textarea id="textarea" name="textarea" cols="50" rows="10" maxlength="500"></textarea></p>
    <p><input id="submit" type="submit" value="送信"></p>
  </form>
  <!-- <script src="js/app.js"></script> -->
  <script>
    $(function(){
      var limitTime = 10;

      $('#button').on('click', function(){
        $('#form').css('display', 'block');
        var timerId = setInterval(function() {
          $('.timer').remove();
          $('#textarea').after('<p class = timer>制限時間：' + limitTime + '秒</p>');
          if (limitTime <= 0) {
            alert('制限時間終了');
            clearInterval(timerId);
          }
          limitTime--;
        }, 1000);
      })
      
      $('#textarea').on('keyup', function(max) {
        $('.count').remove();
        var max = $(this).attr('maxlength');
        var cnt = $(this).val().length;
        var hoge = (max - cnt);
        $('#button').after('<p class= count>あと' + hoge + '文字入力できます。</p>');
      })
    })
  </script>
</body>
</html>